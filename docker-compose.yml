version: '3'
services:
  server:
    image: darneus/cod4_v1.7_server
    volumes:
      - ./main:/srv/cod4/main
      - ./zone:/srv/cod4/zone:ro
      - ./mods:/srv/cod4/mods
      - ./usermaps:/srv/cod4/usermaps:ro
      - ./config:/srv/cod4/config:ro
    network_mode: bridge
    ports:
      - 28960:28960/udp
    restart: always

  cod4_http:
    image: nginx
    container_name: cod4-http
    volumes:
      - ./mods:/usr/share/nginx/html/mods:ro
      - ./usermaps:/usr/share/nginx/html/usermaps:ro
    ports:
      - 8000:80
    network_mode: bridge
    restart: always
